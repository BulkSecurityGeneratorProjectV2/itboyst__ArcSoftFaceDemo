{"version":3,"file":"js/861.2465f039.js","mappings":"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","sources":["webpack://arcface-ui/./src/views/FaceDetect.vue","webpack://arcface-ui/./src/views/FaceDetect.vue?362a"],"sourcesContent":["<template>\r\n  <div class=\"class_face_detect\">\r\n    <el-container>\r\n      <el-header>\r\n        <div class=\"class_title\">人脸检测示例</div>\r\n      </el-header>\r\n\r\n      <el-main>\r\n        <div class=\"class_image__lazy\">\r\n          <el-image class=\"image__lazy\" fit=\"contain\" :src=\"imageSrc\">\r\n            <template #error>\r\n              <div class=\"image-slot\">\r\n                <el-icon>\r\n                  <icon-picture/>\r\n                </el-icon>\r\n              </div>\r\n            </template>\r\n          </el-image>\r\n        </div>\r\n      </el-main>\r\n      <el-footer>\r\n\r\n        <div class=\"class_select\">\r\n          <span style=\"margin-left: 20px;margin-right: 10px\">选择下拉照片</span>\r\n          <el-select v-model=\"selectValue\" @change=\"selectChange\" placeholder=\"Select\">\r\n            <el-option\r\n                v-for=\"item in imageOption\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n            />\r\n          </el-select>\r\n        </div>\r\n\r\n        <div class=\"class_select\" style=\"margin-top: 20px\">\r\n\r\n          <el-upload\r\n              class=\"upload-demo\"\r\n              :before-upload=\"beforeUpload\"\r\n              accept=\"image/png, image/jpeg\"\r\n              :show-file-list=\"false\"\r\n          >\r\n            <el-button type=\"primary\">上传本地照片检测</el-button>\r\n          </el-upload>\r\n\r\n        </div>\r\n\r\n      </el-footer>\r\n\r\n\r\n    </el-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {onMounted, toRefs, reactive, ref} from 'vue'\r\nimport axios from '@/utils/axios'\r\n\r\nexport default {\r\n  name: 'FaceDetect',\r\n  setup() {\r\n    const state = reactive({\r\n      selectValue: 'images/Image1-1.jpg',\r\n      imageSrc: '',\r\n      imageOption: [{\r\n        value: 'images/Image1-1.jpg',\r\n        label: 'Image1-1.jpg',\r\n      },\r\n        {\r\n          value: 'images/Image2-1.jpg',\r\n          label: 'Image2-1.jpg'\r\n        },\r\n        {\r\n          value: 'images/Image3-1.jpg',\r\n          label: 'Image3-1.jpg',\r\n        },]\r\n    })\r\n\r\n    onMounted(() => {\r\n      responseDrawImage(state.selectValue)\r\n    })\r\n\r\n    const selectChange = (value) => {\r\n      responseDrawImage(value)\r\n    }\r\n\r\n    const beforeUpload = (file) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(file);//读取图像文件 result 为 DataURL, DataURL 可直接 赋值给 img.src\r\n      reader.onload = function (event) {\r\n        responseDrawImage(event.target.result)\r\n      }\r\n    }\r\n\r\n    const responseDrawImage = (src) => {\r\n\r\n      let image = new Image();\r\n      image.src = src;\r\n      image.onload = function () {\r\n        let canvas = document.createElement('canvas');\r\n        canvas.width = image.width;\r\n        canvas.height = image.height;\r\n        let ctx = canvas.getContext(\"2d\");\r\n        ctx.drawImage(image, 0, 0, image.width, image.height)\r\n        axios.post(\"/detectFaces\", {image: canvas.toDataURL(\"image/jpeg\")})\r\n            .then(response => {\r\n              if (response.code === 0 && response.data.length > 0) {\r\n                response.data.forEach(r => {\r\n                  let rect = r.rect;\r\n                  let x = rect.left;\r\n                  let y = rect.top;\r\n                  let w = rect.right - rect.left;\r\n                  let h = rect.bottom - rect.top;\r\n                  ctx.strokeStyle = \"#FF0000\";\r\n                  ctx.lineWidth = 5;\r\n                  ctx.strokeRect(x, y, w, h);\r\n                  let gender = '未知'\r\n                  if (r.gender === 0) {\r\n                    gender = '男'\r\n                  } else if (r.gender === 1) {\r\n                    gender = '女'\r\n                  }\r\n\r\n                  let liveness = '-';\r\n                  if (r.liveness == 1) {\r\n                    liveness = '活体'\r\n                  } else if (r.liveness == 0) {\r\n                    liveness = '非活体'\r\n                  }\r\n\r\n                  let txt = '性别:' + gender + '，年龄:' + r.age + '，' + liveness;\r\n                  ctx.fillStyle = \"#FF0000\";\r\n                  ctx.font = \"20px Georgia\";\r\n                  ctx.fillText(txt, x, y - 10);\r\n                  console.info(\"detectSuccess\")\r\n\r\n                });\r\n              }\r\n              state.imageSrc = canvas.toDataURL(\"image/jpeg\");\r\n\r\n            });\r\n      }\r\n    }\r\n\r\n    return {\r\n      ...toRefs(state),\r\n      beforeUpload,\r\n      selectChange\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.class_face_detect .class_title {\r\n  font-size: 25px;\r\n  margin-top: 20px;\r\n  margin-left: 20px;\r\n  width: 800px;\r\n  text-align: center;\r\n}\r\n\r\n.class_face_detect .class_image__lazy {\r\n\r\n  width: 800px;\r\n  height: 500px;\r\n  margin-left: 20px;\r\n  border: 1px solid black;\r\n}\r\n\r\n.class_face_detect .image__lazy {\r\n  width: 800px;\r\n  height: 500px;\r\n}\r\n\r\n.class_face_detect .class_select {\r\n  margin-left: 20px;\r\n  width: 800px;\r\n  text-align: center;\r\n}\r\n\r\n</style>","import { render } from \"./FaceDetect.vue?vue&type=template&id=dc8b1da8&scoped=true\"\nimport script from \"./FaceDetect.vue?vue&type=script&lang=js\"\nexport * from \"./FaceDetect.vue?vue&type=script&lang=js\"\n\nimport \"./FaceDetect.vue?vue&type=style&index=0&id=dc8b1da8&scoped=true&lang=css\"\n\nimport exportComponent from \"Z:\\\\OpenSourceProject\\\\arcface\\\\arcface-ui\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-dc8b1da8\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_createElementBlock","_createVNode","_component_el_container","_component_el_header","_hoisted_2","_component_el_main","_component_el_image","fit","src","_ctx","error","_component_el_icon","_component_icon_picture","_component_el_footer","_hoisted_6","_component_el_select","$event","onChange","$setup","placeholder","_Fragment","_renderList","item","_createBlock","_component_el_option","key","value","label","_component_el_upload","accept","_component_el_button","type","name","setup","state","reactive","selectValue","imageSrc","imageOption","onMounted","responseDrawImage","selectChange","beforeUpload","file","reader","FileReader","readAsDataURL","onload","event","target","result","image","Image","canvas","document","createElement","width","height","ctx","getContext","drawImage","axios","toDataURL","then","response","code","data","length","forEach","r","rect","x","left","y","top","w","right","h","bottom","strokeStyle","lineWidth","strokeRect","gender","liveness","txt","age","fillStyle","font","fillText","console","info","toRefs","__exports__","render"],"sourceRoot":""}