{"version":3,"file":"js/887.f5cf6eb0.js","mappings":"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","sources":["webpack://arcface-ui/./src/views/FaceCompare.vue","webpack://arcface-ui/./src/views/FaceCompare.vue?a5b0"],"sourcesContent":["<template>\r\n\r\n\r\n  <div class=\"demo-image__placeholder\">\r\n    <div class=\"block\">\r\n      <span class=\"demonstration\">照片1</span>\r\n      <el-image :src=\"imageSrc1\" fit=\"contain\" class=\"compare_class_image__lazy\">\r\n        <template #placeholder>\r\n          <div class=\"image-slot\">Loading<span class=\"dot\">...</span></div>\r\n        </template>\r\n      </el-image>\r\n      <div class=\"compare_class_select\">\r\n        <span style=\"margin-right: 10px\">选择下拉照片</span>\r\n        <el-select v-model=\"selectValue1\" @change=\"selectChange(1)\" placeholder=\"Select\">\r\n          <el-option\r\n              v-for=\"item in imageOption1\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </div>\r\n\r\n      <div class=\"compare_class_select\" style=\"margin-top: 20px\">\r\n\r\n        <el-upload\r\n            class=\"upload-demo\"\r\n            :before-upload=\"beforeUpload1\"\r\n            accept=\"image/png, image/jpeg\"\r\n        >\r\n          <el-button type=\"primary\">上传本地照片检测</el-button>\r\n        </el-upload>\r\n\r\n      </div>\r\n    </div>\r\n    <div class=\"block\">\r\n      <span class=\"demonstration\">照片2</span>\r\n      <el-image :src=\"imageSrc2\" fit=\"contain\" class=\"compare_class_image__lazy\">\r\n        <template #placeholder>\r\n          <div class=\"image-slot\">Loading<span class=\"dot\">...</span></div>\r\n        </template>\r\n      </el-image>\r\n      <div class=\"compare_class_select\">\r\n        <span style=\"margin-right: 10px\">选择下拉照片</span>\r\n        <el-select v-model=\"selectValue2\" @change=\"selectChange(2)\" placeholder=\"Select\">\r\n          <el-option\r\n              v-for=\"item in imageOption2\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n          />\r\n        </el-select>\r\n      </div>\r\n\r\n      <div class=\"compare_class_select\" style=\"margin-top: 20px\">\r\n        <el-upload\r\n            class=\"upload-demo\"\r\n            :before-upload=\"beforeUpload2\"\r\n            accept=\"image/png, image/jpeg\"\r\n        >\r\n          <el-button type=\"primary\">上传本地照片检测</el-button>\r\n        </el-upload>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div style=\"width: 100%;text-align: center;margin-top: 20px;margin-bottom: 20px;font-size: 20px\">\r\n\r\n    <span>人脸相似度为: {{ similar }}</span>\r\n\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport {onMounted, toRefs, reactive, ref} from 'vue'\r\nimport axios from '@/utils/axios'\r\n\r\nexport default {\r\n  name: 'FaceCompare',\r\n  setup() {\r\n    const state = reactive({\r\n      similar: '0',\r\n      imageSrc1: 'images/Image1-1.jpg',\r\n      imageSrc2: 'images/Image1-2.jpg',\r\n      selectValue1: 'Image1-1.jpg',\r\n      selectValue2: 'Image1-2.jpg',\r\n      imageOption1: [{\r\n        value: 'images/Image1-1.jpg',\r\n        label: 'Image1-1.jpg'\r\n      },\r\n        {\r\n          value: 'images/Image2-1.jpg',\r\n          label: 'Image2-1.jpg'\r\n        },\r\n        {\r\n          value: 'images/Image3-1.jpg',\r\n          label: 'Image3-1.jpg'\r\n        }],\r\n      imageOption2: [{\r\n        value: 'images/Image1-2.jpg',\r\n        label: 'Image1-2.jpg'\r\n      },\r\n        {\r\n          value: 'images/Image2-2.jpg',\r\n          label: 'Image2-2.jpg'\r\n        },\r\n        {\r\n          value: 'images/Image3-2.jpg',\r\n          label: 'Image3-2.jpg',\r\n        },]\r\n    })\r\n\r\n    onMounted(() => {\r\n      responseDrawImage()\r\n    })\r\n\r\n    const selectChange = (value) => {\r\n      if (value === 1) {\r\n        state.imageSrc1 = state.selectValue1\r\n      } else if (value === 2) {\r\n        state.imageSrc2 = state.selectValue2\r\n      }\r\n      responseDrawImage()\r\n    }\r\n\r\n    const beforeUpload1 = (file) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(file);//读取图像文件 result 为 DataURL, DataURL 可直接 赋值给 img.src\r\n      reader.onload = function (event) {\r\n        state.imageSrc1 = event.target.result\r\n        responseDrawImage()\r\n      }\r\n    }\r\n    const beforeUpload2 = (file) => {\r\n      let reader = new FileReader();\r\n      reader.readAsDataURL(file);//读取图像文件 result 为 DataURL, DataURL 可直接 赋值给 img.src\r\n      reader.onload = function (event) {\r\n        state.imageSrc2 = event.target.result\r\n        responseDrawImage()\r\n      }\r\n    }\r\n\r\n    const responseDrawImage = () => {\r\n\r\n      let image1 = new Image();\r\n      image1.src = state.imageSrc1;\r\n      image1.onload = function () {\r\n        let canvas1 = document.createElement('canvas');\r\n        canvas1.width = image1.width;\r\n        canvas1.height = image1.height;\r\n        let ctx1 = canvas1.getContext(\"2d\");\r\n        ctx1.drawImage(image1, 0, 0, image1.width, image1.height)\r\n\r\n\r\n        let image2 = new Image();\r\n        image2.src = state.imageSrc2;\r\n        image2.onload = function () {\r\n          let canvas2 = document.createElement('canvas');\r\n          canvas2.width = image2.width;\r\n          canvas2.height = image2.height;\r\n          let ctx2 = canvas2.getContext(\"2d\");\r\n          ctx2.drawImage(image2, 0, 0, image2.width, image2.height)\r\n\r\n\r\n          axios.post(\"/compareFaces\",\r\n              {\r\n                image1: canvas1.toDataURL(\"image/jpeg\"),\r\n                image2: canvas2.toDataURL(\"image/jpeg\")\r\n              }\r\n          ).then(response => {\r\n            console.info(response)\r\n            if (response.code === 0) {\r\n              state.similar = response.data\r\n            } else {\r\n              state.similar = response.msg\r\n            }\r\n          });\r\n\r\n\r\n        }\r\n\r\n\r\n      }\r\n    }\r\n    return {\r\n      ...toRefs(state),\r\n      beforeUpload1,\r\n      beforeUpload2,\r\n      selectChange\r\n\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.demo-image__placeholder .compare_class_image__lazy {\r\n\r\n  width: 100%;\r\n  height: 300px;\r\n  /*margin-left: 20px;*/\r\n  border: 1px solid black;\r\n}\r\n\r\n.demo-image__placeholder .block {\r\n  padding: 30px 0;\r\n  text-align: center;\r\n  border-right: solid 1px var(--el-border-color);\r\n  display: inline-block;\r\n  width: 49%;\r\n  box-sizing: border-box;\r\n  vertical-align: top;\r\n\r\n  /*border: 1px solid black;*/\r\n}\r\n\r\n.demo-image__placeholder .demonstration {\r\n  display: block;\r\n  font-size: 18px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.demo-image__placeholder .el-image {\r\n  padding: 0 5px;\r\n  max-width: 500px;\r\n  max-height: 500px;\r\n}\r\n\r\n.demo-image__placeholder.image-slot {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: var(--el-fill-color-light);\r\n  color: var(--el-text-color-secondary);\r\n  font-size: 14px;\r\n}\r\n\r\n.demo-image__placeholder .dot {\r\n  animation: dot 2s infinite steps(3, start);\r\n  overflow: hidden;\r\n}\r\n\r\n.compare_class_select {\r\n  margin-top: 20px;\r\n  /*width: 800px;*/\r\n  /*text-align: center;*/\r\n}\r\n\r\n</style>","import { render } from \"./FaceCompare.vue?vue&type=template&id=38902240&scoped=true\"\nimport script from \"./FaceCompare.vue?vue&type=script&lang=js\"\nexport * from \"./FaceCompare.vue?vue&type=script&lang=js\"\n\nimport \"./FaceCompare.vue?vue&type=style&index=0&id=38902240&scoped=true&lang=css\"\n\nimport exportComponent from \"Z:\\\\OpenSourceProject\\\\arcface\\\\arcface-ui\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-38902240\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_hoisted_3","_createVNode","_component_el_image","src","_ctx","fit","placeholder","_hoisted_4","_hoisted_6","_component_el_select","$event","onChange","$setup","_createElementBlock","_Fragment","_renderList","item","_createBlock","_component_el_option","key","value","label","_component_el_upload","accept","_component_el_button","type","_hoisted_10","_hoisted_11","_hoisted_13","_toDisplayString","name","setup","state","reactive","similar","imageSrc1","imageSrc2","selectValue1","selectValue2","imageOption1","imageOption2","onMounted","responseDrawImage","selectChange","beforeUpload1","file","reader","FileReader","readAsDataURL","onload","event","target","result","beforeUpload2","image1","Image","canvas1","document","createElement","width","height","ctx1","getContext","drawImage","image2","canvas2","ctx2","axios","toDataURL","then","response","console","info","code","data","msg","toRefs","__exports__","render"],"sourceRoot":""}